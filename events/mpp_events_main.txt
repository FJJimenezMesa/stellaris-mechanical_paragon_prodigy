# -----------------------
# NAMESPACE
# -----------------------
namespace = mpp_events_master

# ===================================================
# MPP LOGIC
# ===================================================

# Init flags globales
event = {
    id = mpp_events_master.0
    title = mpp_events_master.0.title
    desc = mpp_events_master.0.desc
    is_triggered_only = yes
    hide_window = yes

    immediate = {
        # Init de galaxia hay Systema MPP
        if = {
            # TODO buscar todos los planetas / sistemas y ver si alguna tiene flag MPP
            # TODO una vez encontrado el lider coger el country y llamar a mpp_set_flags_mpp_system_exists
        }

        # Init de estado de lider parangón
        if = {
            # TODO buscar todos los líderes y ver si alguno tiene el trait parangon
            # TODO una vez encontrado el lider coger el country y llamar a mpp_set_flags_mpp_leader_exists
        }
    }
    option = {
        name = mpp_events_master.0.a
        # Evento técnico: no debería verse en partida
    }
}

# Updates flags de país
country_event = {
    id = mpp_events_master.1
    title = mpp_events_master.1.title
    desc = mpp_events_master.1.desc
    is_triggered_only = yes
    hide_window = yes

    immediate = {
        # Update de ruler
        if = {
            limit = {
                NOT = { mpp_has_mpp_leader_approved }
            }
            # TODO buscar el ruler y si tiene el trait parangon añadir mpp_set_flags_mpp_leader_approved sino encuentra ninguno llamar a mpp_remove_flags_mpp_leader_approved
        }
        else = {
             # TODO buscar el ruler y si no tiene el trait parangon mpp_remove_flags_mpp_leader_approved
        }

        # Update de tech_potential
        if = {
            limit = {
                NOT = { mpp_has_tech_potential }
            }
            mpp_add_tech_potential = yes
        }
        else = {
            mpp_remove_tech_potential = yes
        }

        # Update de agenda 
        if = {
            limit = {
                mpp_can_unlock_agenda = yes
                mpp_has_mpp_agenda = no
            }
            mpp_unlock_mpp_agenda = yes
        }
        else = {
            mpp_lock_mpp_agenda = yes
        }
    }
    option = {
        name = mpp_events_master.1.a
        # Evento técnico: no debería verse en partida
    }
}
